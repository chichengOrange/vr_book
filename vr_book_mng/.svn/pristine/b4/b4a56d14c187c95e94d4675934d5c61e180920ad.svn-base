<?xml version="1.0" encoding="UTF-8"?>
<table sqlname="vr_order">

	<operation name="loadAllOrder" multiplicity="many">
		<sql>
			<![CDATA[
				SELECT 
				  ID,ORDER_ID,USER_ID,PAY_STATUS,BOOK_ID,PRICE,GMT_CREATE,GMT_MODIFIED
				  FROM vr_order
        	]]>
		</sql>
	</operation>
	
	<operation name="selectAllOrder"  resultClass="java.util.List&lt; Map&lt;String,Object&gt; &gt;">
		<extraparams>
			<param name="orderId" javatype="java.lang.String" />
			<param name="userId" javatype="java.lang.String" />
			<param name="bookId" javatype="java.lang.String" />
			<param name="payStatus" javatype="java.lang.String" />
			<param name="offset" javatype="java.lang.Integer" />
			<param name="limit" javatype="java.lang.Integer" />
		</extraparams>
		<sql>select * from vr_order</sql>
		<sqlmap>
			<![CDATA[
				SELECT * FROM vr_order
				where 1=1 
				<isNotEmpty property="orderId">
	    			AND ORDER_ID like '%$orderId$%'
	    		</isNotEmpty>
				<isNotEmpty property="userId">
	    			AND USER_ID like '%$userId$%'
	    		</isNotEmpty>
				<isNotEmpty property="bookId">
	    			AND BOOK_ID like '%$bookId$%'
	    		</isNotEmpty>
				<isNotEmpty property="payStatus">
	    			AND PAY_STATUS = '$payStatus$'
	    		</isNotEmpty>
	    		order by GMT_CREATE desc 
	    		LIMIT $offset$, $limit$
        	]]>
		</sqlmap>
	</operation>
	
	<operation name="selectAllOrderCount" resultClass="int">
		<extraparams>
			<param name="orderId" javatype="java.lang.String" />
			<param name="userId" javatype="java.lang.String" />
			<param name="bookId" javatype="java.lang.String" />
			<param name="payStatus" javatype="java.lang.String" />
		</extraparams>
		<sql>select count(1) from vr_order</sql>
		<sqlmap>
			<![CDATA[
				SELECT count(1) FROM vr_order
				where 1=1 
				<isNotEmpty property="orderId">
	    			AND ORDER_ID like '%$orderId$%'
	    		</isNotEmpty>
				<isNotEmpty property="userId">
	    			AND USER_ID like '%$userId$%'
	    		</isNotEmpty>
				<isNotEmpty property="bookId">
	    			AND BOOK_ID like '%$bookId$%'
	    		</isNotEmpty>
				<isNotEmpty property="payStatus">
	    			AND PAY_STATUS = '%$payStatus$%'
	    		</isNotEmpty>
        	]]>
		</sqlmap>
	</operation>
	<operation name="deletOrderbyid">
		<sql>
			delete from vr_order where ID=?
		</sql>
	</operation>
	<operation name="updateOrder">
		<sql>
			update vr_order set USER_ID=?,BOOK_ID=?,PAY_STATUS=?,PRICE=?,GMT_MODIFIED = ? where ID= ? 
		</sql>
	</operation>
</table>