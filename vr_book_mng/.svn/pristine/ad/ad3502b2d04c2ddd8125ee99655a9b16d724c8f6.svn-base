<?xml version="1.0" encoding="UTF-8"?>
<table sqlname="vr_book_sections">

	<operation name="loadAllsections" multiplicity="many">
		<sql>
			<![CDATA[
				SELECT 
				 ID,MODEL_ID,CHAPTER_ID,SECTION_ID,SECTION_NAMEGMT_CREATE,GMT_MODIFIED
				 FROM vr_book_sections
        	]]>
		</sql>
	</operation>
	
	<operation name="selectSectionsByChapterId" multiplicity="many">
		<extraparams>
			<param name="chapterId" javatype="java.lang.String" />
			<param name="offset" javatype="java.lang.Integer" />
			<param name="limit" javatype="java.lang.Integer" />
		</extraparams>
		<sql>select * from vr_book_sections</sql>
		<sqlmap>
			<![CDATA[
				SELECT * FROM vr_book_sections
				where 1=1 
				<isNotEmpty property="chapterId">
	    			AND CHAPTER_ID = '$chapterId$'
	    		</isNotEmpty>
	    		order by GMT_CREATE desc 
	    		LIMIT $offset$, $limit$
        	]]>
		</sqlmap>
	</operation>
	<operation name="selectCountsectionsByBookId"  resultClass="int">
		<extraparams>
			<param name="chapterId" javatype="java.lang.String" />
		</extraparams>
		<sql>select count(1) from vr_book_sections</sql>
		<sqlmap>
			<![CDATA[
				SELECT count(1) FROM vr_book_sections
				where 1=1 
				<isNotEmpty property="chapterId">
	    			AND CHAPTER_ID = '$chapterId$'
	    		</isNotEmpty>
        	]]>
		</sqlmap>
	</operation>

	<operation name="updateSectionsById">
		<sql>
			update vr_book_sections set SECTION_NAME=?,MODEL_ID=?,GMT_MODIFIED=? where ID= ? 
		</sql>
	</operation>
	<operation name="insertSections">
		<sql>
			insert into vr_book_sections (CHAPTER_ID,SECTION_ID,SECTION_NAME,MODEL_ID,GMT_CREATE) values (?,?,?,?,?)
		</sql>
	</operation>
	<operation name="deleteById">
		<sql>
			delete from vr_book_sections where ID=?
		</sql>
	</operation>
	<operation name="deleteByChapterId">
		<sql>
			delete from vr_book_sections where CHAPTER_ID=?
		</sql>
	</operation>
</table>