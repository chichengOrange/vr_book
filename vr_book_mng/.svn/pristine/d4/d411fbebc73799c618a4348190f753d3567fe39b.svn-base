<?xml version="1.0" encoding="UTF-8"?>
<table sqlname="vr_ontime">



<operation name="selectOutInterface" resultClass="java.util.HashMap" multiplicity="many">
	<sql>
		select * from vr_ontime where 1 = 1
	</sql>
	<sqlmap>
		<![CDATA[
		SELECT QUIT_INTERFACE  name ,count(1) value FROM vr_ontime  GROUP BY QUIT_INTERFACE
		]]>
	</sqlmap>
</operation>
<operation name="selectOntime" resultClass="java.util.HashMap" multiplicity="many">
	<sql>
		select * from vr_ontime where 1 = 1
	</sql>
	<sqlmap>
		<![CDATA[
		select '0-10' as name,sum(a.value) as value from (SELECT
	TIMESTAMPDIFF( MINUTE, ( DATE_FORMAT( vr_ontime.START_TIME, '%Y-%m-%d %H:%i' ) ), ( DATE_FORMAT( vr_ontime.END_TIME, '%Y-%m-%d %H:%i' ) ) ) name ,count(1) value
FROM
	vr_ontime GROUP BY name) a where a.name >= 0 and a.name ${cdata-start} < ${cdata-end} 10
UNION
select '10-30' as name,sum(a.value) as value from (SELECT
	TIMESTAMPDIFF( MINUTE, ( DATE_FORMAT( vr_ontime.START_TIME, '%Y-%m-%d %H:%i' ) ), ( DATE_FORMAT( vr_ontime.END_TIME, '%Y-%m-%d %H:%i' ) ) ) name ,count(1) value
FROM
	vr_ontime GROUP BY name) a where a.name >= 10 and a.name ${cdata-start} < ${cdata-end} 30
UNION
select '30-60' as name,sum(a.value) as value from (SELECT
	TIMESTAMPDIFF( MINUTE, ( DATE_FORMAT( vr_ontime.START_TIME, '%Y-%m-%d %H:%i' ) ), ( DATE_FORMAT( vr_ontime.END_TIME, '%Y-%m-%d %H:%i' ) ) ) name ,count(1) value
FROM
	vr_ontime GROUP BY name) a where a.name >= 30 and a.name ${cdata-start} < ${cdata-end} 60
UNION
select '60-120' as name,sum(a.value) as value from (SELECT
	TIMESTAMPDIFF( MINUTE, ( DATE_FORMAT( vr_ontime.START_TIME, '%Y-%m-%d %H:%i' ) ), ( DATE_FORMAT( vr_ontime.END_TIME, '%Y-%m-%d %H:%i' ) ) ) name ,count(1) value
FROM
	vr_ontime GROUP BY name) a where a.name >= 60 and a.name ${cdata-start} < ${cdata-end}  120
UNION
select '120-' as name,sum(a.value) as value from (SELECT
	TIMESTAMPDIFF( MINUTE, ( DATE_FORMAT( vr_ontime.START_TIME, '%Y-%m-%d %H:%i' ) ), ( DATE_FORMAT( vr_ontime.END_TIME, '%Y-%m-%d %H:%i' ) ) ) name ,count(1) value
FROM
	vr_ontime GROUP BY name) a where a.name >= 120
	
		]]>
	</sqlmap>
</operation>
</table>