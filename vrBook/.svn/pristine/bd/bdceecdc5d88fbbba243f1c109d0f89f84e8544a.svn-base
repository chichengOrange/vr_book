<?xml version="1.0" encoding="UTF-8"?>
<table sqlname="vr_book">
	<column name="PRICE" javatype="com.onway.common.lang.Money" />
	<!-- 搜索书籍 -->
	<operation name="queryBook" multiplicity="many">
		<extraparams>
			<param name="bookName" javatype="java.lang.String"/>
		</extraparams>
		<sql>
			SELECT * FROM vr_book
		</sql>
		<sqlmap>
			<![CDATA[
				SELECT
					ID,
					BOOK_ID,
					BOOK_NAME,
					BOOK_IMG,
					BOOK_PUBLISH,
					BOOK_SIZE,
					NOW_NETWORK,
					DOWNLOAD_URL,
					DOWNLOAD_COUNT,
					CAN_DOWNLOAD,
					PRICE,
					BOOK_HEAT,
					GMT_CREATE,
					GMT_MODIFIED
				FROM vr_book
				WHERE 1=1
				<isNotEmpty property="bookName" prepend="and">
					BOOK_NAME like '%$productName$%'
				</isNotEmpty>
				
			]]>
		</sqlmap>
	</operation>
	
	<!-- 根据书籍id查询 -->
	<operation name="queryBookById">
		<sql>
		    SELECT
				ID,
				BOOK_ID,
				BOOK_NAME,
				BOOK_IMG,
				BOOK_PUBLISH,
				BOOK_SIZE,
				NOW_NETWORK,
				DOWNLOAD_URL,
				DOWNLOAD_COUNT,
				CAN_DOWNLOAD,
				PRICE,
				BOOK_HEAT,
				GMT_CREATE,
				GMT_MODIFIED
			FROM vr_book
			WHERE BOOK_ID = ?
		</sql>
	</operation>
	
	<!-- 根据书籍id查询 -->
	<operation name="updateDownCount">
		<sql>
		    update vr_book set DOWNLOAD_COUNT = DOWNLOAD_COUNT + 1
			WHERE BOOK_ID = ?
		</sql>
	</operation>
</table>