package com.onway.model.conver;

import com.onway.fyapp.common.dal.dataobject.ReduceDO;
import com.onway.fyapp.common.dal.dataobject.TeamDO;
import com.onway.model.enums.ReduceTypeEnum;
import com.onway.utils.DateUtil;
import com.onway.web.controller.result.ReduceResult;

/**
 * 
 * <p>
 * Title: MsgConver
 * </p>
 * <p>
 * Description: 消息实体转换
 * </p>
 * 
 * @author yugang.ni
 * @date 2018年6月27日 下午5:59:44
 */
public class ReduceConver {

	public static ReduceResult buildReduceListResult( ReduceDO reduceDO) {
		if (null == reduceDO)
			return null;

		ReduceResult reduceResult = new ReduceResult();
		reduceResult.setReduceId(reduceDO.getId());
		reduceResult.setReduceType(reduceDO.getType());
		reduceResult.setReduceTitle(ReduceTypeEnum
				.getByCode(reduceDO.getType()).message());
		reduceResult.setReduceImg(reduceDO.getBackImg());
		reduceResult.setAmount(reduceDO.getAmount().toSimpleString());
		reduceResult.setAmountOld(reduceDO.getReachOff().toSimpleString());

		return reduceResult;
	}

	public static ReduceResult buildReduceDetailResult( ReduceDO reduceDO, TeamDO teamDO) {
		if (null == reduceDO)
			return null;

		ReduceResult reduceResult = new ReduceResult();
		reduceResult.setReduceId(reduceDO.getId());
		reduceResult.setReduceType(reduceDO.getType());
		reduceResult.setReduceTitle(ReduceTypeEnum
				.getByCode(reduceDO.getType()).message());
		reduceResult.setReduceImg(reduceDO.getBackImg());
		reduceResult.setAmount(reduceDO.getAmount().toSimpleString());
		reduceResult.setAmountOld(reduceDO.getReachOff().toSimpleString());
		
		if(null != teamDO){
			reduceResult.setShopName(teamDO.getTeamName());
		}
		reduceResult.setCanUseMsg("周一至周日可用");
		
		String startTime = DateUtil.dateToString(reduceDO.getStartDate(), DateUtil.pointFormat);
		String endTime = DateUtil.dateToString(reduceDO.getEndDate(), DateUtil.pointFormat);
		reduceResult.setExpiryDate(startTime+"至"+endTime);
		
		reduceResult.setUseTime("17:00-次日01:00");
		reduceResult.setUseArea("全场通用");
		reduceResult.setUseRule("全场随意");
		reduceResult.setReduceSubTitle("可叠加|随时退");
		
		return reduceResult;
	}
}
