<?xml version="1.0" encoding="UTF-8"?>
<table sqlname="vr_version">
	<!-- 搜索书籍 -->
	<operation name="insert">
		<sql>
			INSERT INTO vr_version(
				ID,
				VERSION_NUM,
				VERSION_TYPE,
				STATUS,
				MEMO,
				GMT_CREATE,
				GMT_MODIFIED
			)VALUES(
				?,?,?,?,?,CURRENT_TIMESTAMP,CURRENT_TIMESTAMP
			)
		</sql>
	</operation>
	
	<!-- 根据书籍id查询 -->
	<operation name="queryVersion">
		<sql>
		    SELECT
				ID,
				VERSION_NUM,
				VERSION_TYPE,
				STATUS,
				MEMO,
				GMT_CREATE,
				GMT_MODIFIED
			FROM vr_version
			WHERE VERSION_NUM = ? AND VERSION_TYPE = ? AND STATUS = ?
		</sql>
	</operation>
	
	<!-- 根据系统查询最新更新信息 -->
	<operation name="queryNewVersion">
		<extraparams>
			<param name="type" javatype="java.lang.String"/>
			<param name="status" javatype="java.lang.String"/>
		</extraparams>
		<sql>
		    SELECT
				*
			FROM vr_version
		</sql>
		<sqlmap>
			SELECT
				ID,
				VERSION_NUM,
				VERSION_TYPE,
				STATUS,
				MEMO,
				GMT_CREATE,
				GMT_MODIFIED
			FROM vr_version
			WHERE 1=1
			<isNotEmpty property="type" prepend="and">
					VERSION_TYPE = #type#
			</isNotEmpty>
			<isNotEmpty property="status" prepend="and">
					STATUS = #status#
			</isNotEmpty>
			ORDER BY GMT_MODIFIED DESC
			LIMIT 0,1
		</sqlmap>
	</operation>
</table>