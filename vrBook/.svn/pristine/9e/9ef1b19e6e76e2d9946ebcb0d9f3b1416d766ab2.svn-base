<?xml version="1.0" encoding="UTF-8"?>
<table sqlname="vr_functions_point_log">

	<operation name="insert">
		<sql>
			INSERT INTO vr_functions_point_log(
				ID,
				USER_ID,
				MODEL_ID,
				INTERFACES,
				OPERATION_TYPE,
				OPERATION_COUNT,
				POSITION,
				GMT_CREATE,
				GMT_MODIFIED
			)VALUES(
				?,?,?,?,?,?,?,CURRENT_TIMESTAMP,CURRENT_TIMESTAMP
			)
		</sql>
	</operation>
	
	<operation name="updateByUserId">
		<extraparams>
			<param name="userId" javatype="java.lang.String"/>
			<param name="interfaces" javatype="java.lang.String"/>
			<param name="type" javatype="java.lang.String"/>
			<param name="position" javatype="java.lang.String"/>
		</extraparams>
		<sql>
				UPDATE vr_functions_point_log SET 
				GMT_MODIFIED = CURRENT_TIMESTAMP
		</sql>
		<sqlmap>
				UPDATE vr_functions_point_log SET 
				GMT_MODIFIED = CURRENT_TIMESTAMP,
				OPERATION_COUNT = OPERATION_COUNT + 1
				WHERE 1=1
			<isNotEmpty property="userId" prepend="and">
				USER_ID = #userId#
			</isNotEmpty>
			<isNotEmpty property="interfaces" prepend="and">
				INTERFACES = #interfaces#
			</isNotEmpty>
			<isNotEmpty property="type" prepend="and">
				OPERATION_TYPE = #type#
			</isNotEmpty>
			<isNotEmpty property="position" prepend="and">
				POSITION = #position#
			</isNotEmpty>
		</sqlmap>
	</operation>

	<operation name="queryByUserIdAndFunction">
		<extraparams>
			<param name="userId" javatype="java.lang.String"/>
			<param name="interfaces" javatype="java.lang.String"/>
			<param name="type" javatype="java.lang.String"/>
			<param name="position" javatype="java.lang.String"/>
		</extraparams>
		<sql>
		    SELECT * FROM vr_functions_point_log
		</sql>
		<sqlmap>
			<![CDATA[
			
			SELECT 
				ID,
				USER_ID,
				MODEL_ID,
				INTERFACES,
				OPERATION_TYPE,
				OPERATION_COUNT,
				POSITION,
				GMT_CREATE,
				GMT_MODIFIED
			FROM vr_functions_point_log
			WHERE 1=1
			<isNotEmpty property="userId" prepend="and">
				USER_ID = #userId#
			</isNotEmpty>
			<isNotEmpty property="interfaces" prepend="and">
				INTERFACES = #interfaces#
			</isNotEmpty>
			<isNotEmpty property="type" prepend="and">
				OPERATION_TYPE = #type#
			</isNotEmpty>
			<isNotEmpty property="position" prepend="and">
				POSITION = #position#
			</isNotEmpty>
			]]>
		</sqlmap>
		
	</operation>
</table>