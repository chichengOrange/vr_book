/**
 * onway.com Inc.
 * Copyright (c) 2013-2013 All Rights Reserved.
 */
package com.onway.web.controller.mine;

import java.text.MessageFormat;

import javax.servlet.http.HttpServletRequest;

import org.apache.log4j.Logger;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.ResponseBody;

import com.onway.platform.common.base.BaseResult;
import com.onway.platform.common.exception.BaseRuntimeException;
import com.onway.platform.common.utils.LogUtil;
import com.onway.web.controller.AbstractController;
import com.onway.web.controller.result.JsonResult;

/**
 * 
* <p>Title: AddressController</p>  
* <p>Description: 意见反馈控制类</p>  
* @author yugang.ni  
* @date 2018年6月29日  下午5:02:56
 */
@Controller
public class OptionController extends AbstractController {
	
	private static final Logger log = Logger.getLogger(OptionController.class);
	
	/**
	 * 意见反馈新增
	 * 
	 * @param request
	 * @return
	 */
	@RequestMapping("/newOption.do")
	@ResponseBody
	public Object newOption(HttpServletRequest request) {
		
		String userId = "";
		String title = "";
		String content = "";

		JsonResult result = new JsonResult(false);
		try {
			userId = request.getParameter("userId");
			title = request.getParameter("title");
			content = request.getParameter("content");
			
			BaseResult baseResult = optionOperationService.newOption(userId, title, content);
			
			result.setBizSucc(baseResult.isSuccess());
			result.setErrMsg(baseResult.getMessage());

		} catch (BaseRuntimeException e) {
			LogUtil.error(log, MessageFormat.format(
					"意见反馈新增失败，userId{0},message:{1}", new Object[] {
							userId, e.getMessage() }));
			return new JsonResult(false, "", e.getMessage());
		} catch (Exception e) {
			LogUtil.error(log, MessageFormat.format(
					"意见反馈新增异常！userId{0},message:{1}", new Object[] {
							userId, e.getMessage() }));
			return new JsonResult(false, "", e.getMessage());
		}
		return result;
	}
	
}
